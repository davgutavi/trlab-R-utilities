---
title: TrLab Experiment Report
date: '`r strftime(Sys.time(), format = "%B %d, %Y")`'
output: 
  pdf_document:
    toc: true
    toc_depth: 3
  html_document:
    toc: true
    toc_depth: 3
---

\pagebreak

```{r setup , include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE , warning = FALSE , results = "asis")
source("load_environment.R", local = knitr::knit_global())
source("./utils/experiment_management.R", local = knitr::knit_global())
# Set the experiment .sol absolute path
solPath <- "/Users/davgutavi/triclustering_france/experiment_01/experiment_01.sol"

# Load experiment
experiment <- loadExperiment(solPath)

# Load TRIQ analysis
parent_path <- dirname(solPath)
sol_name <- basename(solPath)
experiment_name <- unlist(strsplit(sol_name, "\\."))[1]
filename <- paste(experiment_name,"_triq.csv",sep="")
filepath <- paste(parent_path,filename,sep="/")
triq <- read.csv(filepath, sep = ";" , header = TRUE )[-c(7:10)]
triq[is.na(triq)] <- ""

# Build pattern graphs
patternGraphs <- buildExperimentPatternGraphs(experiment,
  value_tag = "consumption",
  layer_tag = "year",
  instance_tag = "time slot",
  ial_title = "Monthly consumption series for each year",
  ila_title = "Yearly consumption series for each month",
  lia_title = "Annual consumption for each month")

```

# TRIQ analysis

```{r}
knitr::kable(triq)
```

# Graphical analysis

```{r}
i <- 1
for (sol_gr in patternGraphs){
  cat(paste0( "## Solution " , i , "\n\n"))
  print(sol_gr$ial)
  print(sol_gr$ila)
  print(sol_gr$lia)
  i <- i+1
}
```

















